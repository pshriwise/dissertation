
\chapter{Conclusion}\label{ch:conclusion}


This work provides a set of methods and implementations which significantly
improves the performance of DAGMC's particle tracking capability. Performance
improvements varied from 30-500\% for all tests presented, without no change in
the results from unmodified DAGMC code.

The SDF implementation in DAGMC showed promising results for contrived test
cases, but at most provided a 30\% improvement in performance for production
models. The opportunity space for this data structure is limited, but the model
used to inform it's application has been varied for the majority of cases,
though some improvements could be made for locally small average chord length
values.

The Mixed Precision Bounding Volume Hierarchy (MPBVH) provides a robust method
for returning higher precision intersections suitable for engineering analysis
while exploiting CPU SIMD instructions for reduced precision bounding
entities. The implementation provided by the author demonstrates performance
comparable to single precision systems used for rendering with a significant
demonstrated impact on transport performance.

The use of a mixed AABB/OBB tree to improve performance for models containing
severe high valence regions by informing BVH construction using an associated
mesh database, MOAB, demonstrates the necessity of oriented bounding boxes for
optimal performance in DAGMC models.

The overall impact of this work on CAD-based Monte Carlo Radiation Transport is
computational savings of 2x at a minimum when applying the MPBVH, with greater
benefits of up to 5x depending on the nature of the model.

\section{Other Contributions}\label{sec:other_contrib}

Broader impacts of this work include a performant CPU ray tracer capable of
use in engineering analysis work. The MPBVH is coupled with MOAB, a mesh
database currently in use for engineering analysis purposes at Argonne National
Lab. This tool can be built using standard GNU compilers and is relatively
lightweight.

Work on adaptive BVH construction around HV regions demonstrates the importance
of spatial query capabilities which are closely linked to a mesh framework in
order to be able to detect problematic mesh features and adjust build settings.

The use of a mixed AABB/OBB to improve performance for models containing high
valence regions suggests that for engineering analysis, or at least for the
surface meshses generated by Cubit/Trelis for use in DAGMC, that AABBs can cause
large amounts of overlap in certain regions of the model, resulting in several
orders of magnitude degradation in ray query times.

\section{Suggested Future Work}\label{sec:future_work}

Some improvement of the SDF model is suggested in which additional information
about the geometric properties of the target volume is used to inform decisions
about SDF application. In particular, information on the variation of the
average chord length could be used to avoid application of the data structure
where its predicted utilization is over estimated. Spatially varying information
on the collision density of particles, could also be used to better inform the
predictive tool for analysis.

Another extension of the SDF predictive model could be its use to inform
algorithms for domain subdivision in codes where Woodcock delta tracking is
applied \cite{Leppanen_2010} \cite{Yonghao_2011}. 

There are many directions work on the MPBVH could take. Slightly more exotic
architectures used in high performance computing clusters provide wider
registers than the AVX2 instructions used in this work. This creates the
possibility of creating tree branching ratio of 8 or 16 for even more shallow
trees and lower memory footprints. Higher branching ratios also allow the MPBVH
to extend naturally to other hierarchies like the Octree which has other
benefits in particle tracking and data field storage.

As suggested in Chapter \ref{ch:simd_bvh}, box extension values could be applied
on a volume-by-volume basis for MCRT to avoid performance degradation in models
with a large global scale, but regions with small components. This is
application-specific, but could be integrated into the interface of the MPBVH
to be set according to different use-cases.


Mesh features similar to the high valence region could be sought out using a
variety of meshing schemes, geometries, and a program designed to highlight
regions of models in which ray fire times are much lower than average to
automatically highlight these areas for characterization and analysis as was
done for the high valence region. 


